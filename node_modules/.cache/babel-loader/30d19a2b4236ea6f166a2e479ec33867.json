{"ast":null,"code":"import Axios from \"axios\";\nimport { MESSAGE_DATA_ERROR, MESSAGE_STATUS_CODE } from \"../constants/messageSnackbar.constant\";\nimport { ERROR_SIGN_IN, SIGN_IN, SIGN_OUT } from \"../constants/signIn.constant\";\nimport { hidenLoader_Action, showLoader_Action } from \"./common.action\"; // signIn\n\nexport const signIn_Action = (data, history) => {\n  return async dispatch => {\n    try {\n      // show loading\n      dispatch(showLoader_Action());\n      const res = await Axios({\n        method: \"POST\",\n        url: \"https://movie0706.cybersoft.edu.vn/api/QuanLyNguoiDung/DangNhap\",\n        data // recive (data) to import client  && history() to Sign-In.page\n\n      });\n      const {\n        accessToken,\n        taiKhoan,\n        maLoaiNguoiDung,\n        ...userLogin\n      } = res.data;\n      localStorage.setItem(\"token\", JSON.stringify(accessToken)); // use booking.action\n\n      localStorage.setItem(\"taiKhoan\", JSON.stringify(taiKhoan)); // use booking.action\n\n      localStorage.setItem(\"userLogin\", JSON.stringify(userLogin)); // use Sign-Out.page\n\n      localStorage.setItem(\"maLoaiNguoiDung\", JSON.stringify(maLoaiNguoiDung)); // use guard.hoc\n\n      history.goBack();\n      dispatch({\n        type: SIGN_IN,\n        payload: userLogin\n      }); // hidden loading\n\n      dispatch(hidenLoader_Action());\n    } catch (error) {\n      console.log(error.response);\n      dispatch({\n        type: MESSAGE_STATUS_CODE,\n        // show message error\n        payload: error.response.status\n      });\n      dispatch({\n        type: MESSAGE_DATA_ERROR,\n        // show message error\n        payload: error.response.data\n      }); // hidden loading\n\n      dispatch(hidenLoader_Action());\n    }\n  };\n}; // signOut\n\nexport const signOut_Action = () => {\n  return {\n    type: SIGN_OUT\n  };\n};","map":{"version":3,"sources":["/home/atat-dev/Desktop/VS_CODE/Project_Movie_Booking/src/store/actions/signIn.action.js"],"names":["Axios","MESSAGE_DATA_ERROR","MESSAGE_STATUS_CODE","ERROR_SIGN_IN","SIGN_IN","SIGN_OUT","hidenLoader_Action","showLoader_Action","signIn_Action","data","history","dispatch","res","method","url","accessToken","taiKhoan","maLoaiNguoiDung","userLogin","localStorage","setItem","JSON","stringify","goBack","type","payload","error","console","log","response","status","signOut_Action"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,kBAAT,EAA6BC,mBAA7B,QAAwD,uCAAxD;AACA,SAASC,aAAT,EAAwBC,OAAxB,EAAiCC,QAAjC,QAAiD,8BAAjD;AACA,SAASC,kBAAT,EAA6BC,iBAA7B,QAAsD,iBAAtD,C,CACA;;AACA,OAAO,MAAMC,aAAa,GAAG,CAACC,IAAD,EAAOC,OAAP,KAAmB;AAC9C,SAAO,MAAOC,QAAP,IAAoB;AACzB,QAAI;AACF;AACAA,MAAAA,QAAQ,CAACJ,iBAAiB,EAAlB,CAAR;AACA,YAAMK,GAAG,GAAG,MAAMZ,KAAK,CAAC;AACtBa,QAAAA,MAAM,EAAE,MADc;AAEtBC,QAAAA,GAAG,EAAE,iEAFiB;AAGtBL,QAAAA,IAHsB,CAGhB;;AAHgB,OAAD,CAAvB;AAKA,YAAM;AAAEM,QAAAA,WAAF;AAAeC,QAAAA,QAAf;AAAyBC,QAAAA,eAAzB;AAA0C,WAAGC;AAA7C,UAA2DN,GAAG,CAACH,IAArE;AACAU,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BC,IAAI,CAACC,SAAL,CAAeP,WAAf,CAA9B,EATE,CAS0D;;AAC5DI,MAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCC,IAAI,CAACC,SAAL,CAAeN,QAAf,CAAjC,EAVE,CAU0D;;AAC5DG,MAAAA,YAAY,CAACC,OAAb,CAAqB,WAArB,EAAkCC,IAAI,CAACC,SAAL,CAAeJ,SAAf,CAAlC,EAXE,CAW4D;;AAC9DC,MAAAA,YAAY,CAACC,OAAb,CAAqB,iBAArB,EAAwCC,IAAI,CAACC,SAAL,CAAeL,eAAf,CAAxC,EAZE,CAYwE;;AAC1EP,MAAAA,OAAO,CAACa,MAAR;AACAZ,MAAAA,QAAQ,CAAC;AACPa,QAAAA,IAAI,EAAEpB,OADC;AAEPqB,QAAAA,OAAO,EAAEP;AAFF,OAAD,CAAR,CAdE,CAmBF;;AACAP,MAAAA,QAAQ,CAACL,kBAAkB,EAAnB,CAAR;AACD,KArBD,CAqBE,OAAOoB,KAAP,EAAc;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACG,QAAlB;AACAlB,MAAAA,QAAQ,CAAC;AACPa,QAAAA,IAAI,EAAEtB,mBADC;AACmB;AAC1BuB,QAAAA,OAAO,EAAEC,KAAK,CAACG,QAAN,CAAeC;AAFjB,OAAD,CAAR;AAIFnB,MAAAA,QAAQ,CAAC;AACLa,QAAAA,IAAI,EAAEvB,kBADD;AACoB;AACzBwB,QAAAA,OAAO,EAAEC,KAAK,CAACG,QAAN,CAAepB;AAFnB,OAAD,CAAR,CANgB,CAUd;;AACAE,MAAAA,QAAQ,CAACL,kBAAkB,EAAnB,CAAR;AACD;AACF,GAnCD;AAoCD,CArCM,C,CAsCP;;AACA,OAAO,MAAMyB,cAAc,GAAG,MAAM;AAClC,SAAO;AACLP,IAAAA,IAAI,EAAEnB;AADD,GAAP;AAGD,CAJM","sourcesContent":["import Axios from \"axios\";\nimport { MESSAGE_DATA_ERROR, MESSAGE_STATUS_CODE } from \"../constants/messageSnackbar.constant\";\nimport { ERROR_SIGN_IN, SIGN_IN, SIGN_OUT } from \"../constants/signIn.constant\";\nimport { hidenLoader_Action, showLoader_Action } from \"./common.action\";\n// signIn\nexport const signIn_Action = (data, history) => {\n  return async (dispatch) => {\n    try {\n      // show loading\n      dispatch(showLoader_Action())\n      const res = await Axios({\n        method: \"POST\",\n        url: \"https://movie0706.cybersoft.edu.vn/api/QuanLyNguoiDung/DangNhap\",\n        data, // recive (data) to import client  && history() to Sign-In.page\n      });\n      const { accessToken, taiKhoan, maLoaiNguoiDung, ...userLogin } = res.data;\n      localStorage.setItem(\"token\", JSON.stringify(accessToken)); // use booking.action\n      localStorage.setItem(\"taiKhoan\", JSON.stringify(taiKhoan)); // use booking.action\n      localStorage.setItem(\"userLogin\", JSON.stringify(userLogin)); // use Sign-Out.page\n      localStorage.setItem(\"maLoaiNguoiDung\", JSON.stringify(maLoaiNguoiDung)); // use guard.hoc\n      history.goBack();\n      dispatch({\n        type: SIGN_IN,\n        payload: userLogin,\n      });\n\n      // hidden loading\n      dispatch(hidenLoader_Action())\n    } catch (error) {\n      console.log(error.response);\n      dispatch({\n        type: MESSAGE_STATUS_CODE,// show message error\n        payload: error.response.status\n    })\n    dispatch({\n        type: MESSAGE_DATA_ERROR,// show message error\n        payload: error.response.data\n    })\n      // hidden loading\n      dispatch(hidenLoader_Action())\n    }\n  };\n};\n// signOut\nexport const signOut_Action = () => {\n  return {\n    type: SIGN_OUT,\n  };\n};\n"]},"metadata":{},"sourceType":"module"}