{"ast":null,"code":"import Axios from \"axios\";\nimport { DOMAIN } from \"../../services/domainUrl\";\nimport { BOOKING_CHAIR, CHOICE_CHAIR, GET_TICKET_LIST } from \"../constants/booking.constant\";\nimport { GET_CODE_INFO_CINEMA, GET_CODE_PHIM_BOOKING } from \"../constants/bookingCodePhim.constant\";\nimport { hidenLoader_Action, showLoader_Action } from \"./common.action\";\nexport const getTicketListAction = maLichChieu => {\n  return async dispatch => {\n    try {\n      dispatch(showLoader_Action());\n      const res = await Axios({\n        method: 'GET',\n        url: `https://movie0706.cybersoft.edu.vn/api/QuanLyDatVe/LayDanhSachPhongVe?MaLichChieu=${maLichChieu}`\n      });\n      dispatch({\n        type: GET_TICKET_LIST,\n        payload: res.data.danhSachGhe\n      });\n      dispatch(hidenLoader_Action());\n    } catch (error) {\n      console.log(error);\n      dispatch(hidenLoader_Action());\n    }\n  };\n};\nexport const getMaPhimBooking = maPhim => {\n  return async dispatch => {\n    try {\n      const res = await Axios({\n        method: \"GET\",\n        url: `${DOMAIN}QuanLyRap/LayThongTinLichChieuPhim?MaPhim=${maPhim}`\n      });\n      dispatch({\n        type: GET_CODE_PHIM_BOOKING,\n        payload: res.data\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n};\nexport const getMaPhimCinema = maLichChieu => {\n  return async dispatch => {\n    try {\n      const res = await Axios({\n        method: \"GET\",\n        url: `${DOMAIN}QuanLyDatVe/LayDanhSachPhongVe?MaLichChieu=${maLichChieu}`\n      });\n      dispatch({\n        type: GET_CODE_INFO_CINEMA,\n        payload: res.data\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n};\nexport const choiceChairAction = payload => {\n  return {\n    type: CHOICE_CHAIR,\n    // great value dangChon => BookingReducer\n    payload\n  };\n};\nexport const bookingTicketAction = (showTimeCode, listChairChoice) => {\n  // reccive (showTimeCode, listChairChoice) form dispatch BookingComponent\n  return async dispatch => {\n    // get data to localstorage have save form action/signIn_Action \n    const toKen = JSON.parse(localStorage.getItem('token'));\n    const taiKhoan = JSON.parse(localStorage.getItem('taiKhoan'));\n\n    try {\n      // show loading\n      dispatch(showLoader_Action());\n      const res = await Axios({\n        method: 'POST',\n        url: \"https://movie0706.cybersoft.edu.vn/api/QuanLyDatVe/DatVe\",\n        data: {\n          maLichChieu: showTimeCode,\n          danhSachVe: listChairChoice,\n          taiKhoanNguoiDung: taiKhoan\n        },\n        headers: {\n          Authorization: `Bearer ${toKen}`\n        }\n      });\n      dispatch({\n        type: BOOKING_CHAIR,\n        // none save BookingReducer\n        payload: res\n      }); // hidden loading\n\n      dispatch(hidenLoader_Action());\n    } catch (error) {\n      console.log(error.response.status); // hidden loading\n\n      dispatch(hidenLoader_Action());\n    }\n  };\n};","map":{"version":3,"sources":["/home/atat-dev/Desktop/VS_CODE/ReactJS/Project_Movie_Booking/src/store/actions/booking.action.js"],"names":["Axios","DOMAIN","BOOKING_CHAIR","CHOICE_CHAIR","GET_TICKET_LIST","GET_CODE_INFO_CINEMA","GET_CODE_PHIM_BOOKING","hidenLoader_Action","showLoader_Action","getTicketListAction","maLichChieu","dispatch","res","method","url","type","payload","data","danhSachGhe","error","console","log","getMaPhimBooking","maPhim","getMaPhimCinema","choiceChairAction","bookingTicketAction","showTimeCode","listChairChoice","toKen","JSON","parse","localStorage","getItem","taiKhoan","danhSachVe","taiKhoanNguoiDung","headers","Authorization","response","status"],"mappings":"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","sourcesContent":["import Axios from \"axios\";\nimport { DOMAIN } from \"../../services/domainUrl\";\nimport { BOOKING_CHAIR, CHOICE_CHAIR, GET_TICKET_LIST } from \"../constants/booking.constant\";\nimport { GET_CODE_INFO_CINEMA, GET_CODE_PHIM_BOOKING } from \"../constants/bookingCodePhim.constant\";\nimport { hidenLoader_Action, showLoader_Action } from \"./common.action\";\n\nexport const getTicketListAction = (maLichChieu) => {\n    return async (dispatch) => {\n        try {\n            dispatch(showLoader_Action())\n            const res = await Axios({\n                method: 'GET',\n                url: `https://movie0706.cybersoft.edu.vn/api/QuanLyDatVe/LayDanhSachPhongVe?MaLichChieu=${maLichChieu}`\n            })\n            dispatch({\n                type: GET_TICKET_LIST,\n                payload: res.data.danhSachGhe\n            })\n            dispatch(hidenLoader_Action())\n        } catch (error) {\n            console.log(error);\n            dispatch(hidenLoader_Action())\n        }\n    }\n}\n\nexport const getMaPhimBooking = (maPhim) => {\n    return async (dispatch) => {\n        try {\n            const res = await Axios({\n                method: \"GET\",\n                url: `${DOMAIN}QuanLyRap/LayThongTinLichChieuPhim?MaPhim=${maPhim}`\n            })\n            dispatch({\n                type: GET_CODE_PHIM_BOOKING,\n                payload: res.data,\n            })\n        } catch (error) {\n            console.log(error);\n        }\n    }\n}\n\nexport const getMaPhimCinema = (maLichChieu) => {\n    return async (dispatch) => {\n        try {\n            const res = await Axios({\n                method: \"GET\",\n                url: `${DOMAIN}QuanLyDatVe/LayDanhSachPhongVe?MaLichChieu=${maLichChieu}`\n            })\n            dispatch({\n                type: GET_CODE_INFO_CINEMA,\n                payload: res.data,\n            })\n        } catch (error) {\n            console.log(error);\n        }\n    }\n}\n\nexport const choiceChairAction = (payload) => {\n    return {\n        type: CHOICE_CHAIR,// great value dangChon => BookingReducer\n        payload,\n    }\n}\n\nexport const bookingTicketAction = (showTimeCode, listChairChoice) => {\n    // reccive (showTimeCode, listChairChoice) form dispatch BookingComponent\n    return async (dispatch) => {\n        // get data to localstorage have save form action/signIn_Action \n        const toKen = JSON.parse(localStorage.getItem('token'))\n        const taiKhoan = JSON.parse(localStorage.getItem('taiKhoan'))\n        try {\n            // show loading\n            dispatch(showLoader_Action())\n            const res = await Axios({\n                method: 'POST',\n                url: \"https://movie0706.cybersoft.edu.vn/api/QuanLyDatVe/DatVe\",\n                data: {\n                    maLichChieu: showTimeCode,\n                    danhSachVe: listChairChoice,\n                    taiKhoanNguoiDung: taiKhoan,\n                },\n                headers: {\n                    Authorization: `Bearer ${toKen}`,\n                }\n            })\n            dispatch({\n                type: BOOKING_CHAIR, // none save BookingReducer\n                payload: res,\n            })\n            // hidden loading\n            dispatch(hidenLoader_Action())\n        } catch (error) {\n            console.log(error.response.status);\n            // hidden loading\n            dispatch(hidenLoader_Action())\n        }\n    }\n}\n\n"]},"metadata":{},"sourceType":"module"}